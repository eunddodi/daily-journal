
# 24-02-28

(+) react-query v5 migration

- v5 ë³€ê²½ì‚¬í•­
    - useQuery ì¸ì í†µì¼ (ì˜¤ë²„ë¡œë“œ ì œê±°) ê°ì²´ë§Œ ë„˜ê¸¸ ìˆ˜ ìˆë„ë¡
    - useQuery callback (onSuccess, onError ë“±) ì œê±°
    - cacheTime ì´ë¦„ì„ gcTimeìœ¼ë¡œ ë³€ê²½
    - **ğŸ¤¯ `status: loading` has been changed to `status: pending` and `isLoading` has been changed to `isPending` and `isInitialLoading` has now been renamed to `isLoading`**
- status ë³€ê²½ì— ëŒ€í•œ ëª…í™•í•œ ì´í•´, ë¹ ë¥¸ ì ìš©
    - `v4 ê¹Œì§€`
        - loading: ì¿¼ë¦¬ status ì¤‘ í•œ ê°€ì§€.Â **ë°ì´í„°ê°€ ì—†ìŒ**ì„ ì˜ë¯¸. ìºì‹œ ë°ì´í„°ë„ ì—†ê³ , ìµœì´ˆì˜ queryFnì´ ì¢…ë£Œë˜ì§€ ì•Šì€ ìƒíƒœ. ì¦‰ ì¿¼ë¦¬ì— ìºì‹œ ë°ì´í„°ê°€ ì¡´ì¬í–ˆë‹¤ë©´, 'ìµœì‹  ë°ì´í„°ê°€ í´ë¼ì´ì–¸íŠ¸ì— ì—†ë‹¤'ë¥¼ í•´ë‹¹ í”Œë˜ê·¸ë¡œ ì‹ë³„í•  ìˆ˜ ì—†ìŒ.
        - fetching: fetchStatus ì¤‘ í•œ ê°€ì§€. queryFnì´ ì‹¤í–‰ ì¤‘ì´ë©´ true. ë”°ë¼ì„œÂ `loading`ì¸ ë™ì‹œì—Â `fetching`ì¼ ìˆ˜ ìˆë‹¤. í™”ë©´ì—ëŠ” ìºì‹œ ë°ì´í„°ë¥¼ ë³´ì—¬ì£¼ê³  ìˆìœ¼ë©´ì„œ background fetchë¥¼ ì‹¤í–‰ ì¤‘ì´ë¼ë©´Â `success`Â +Â `fetching`
    - `ë¬¸ì œ ì˜ì‹`
        
        > í´ë¼ì´ì–¸íŠ¸ì˜ 'ë¡œë”©'ì´ë€? ë°ì´í„°ê°€ ì—†ê³  + ê·¸ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ì¸ ìƒíƒœ
        > 
        
        ì´ ìƒíƒœë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´Â ë‘ ê°€ì§€ ìƒíƒœë¥¼ í˜¼í•©í•´ì„œ(`isFetching && isLoading`) ì‚¬ìš©í•´ì•¼ í–ˆìŒ (í•´ë‹¹ ë‹ˆì¦ˆì— ëŒ€í•œ í¸ì˜ë¥¼ ì œê³µí•˜ê³ ì v4.8ì—ì„œ isInitialLoadingì´ë¼ëŠ” ì´ë¦„ì˜ í”Œë˜ê·¸ë¥¼ ì œê³µí–ˆì—ˆë‹¤)
        
    - `v5`
        - ê¸°ì¡´ì˜Â `loading`ì„Â `pending`ìœ¼ë¡œ ë³€ê²½:Â **'ë°ì´í„°ê°€ ì—†ë‹¤'**ëŠ” ì˜ë¯¸ë§Œì„ ë” ëª…í™•íˆ ë“œëŸ¬ë‚´ê¸° ìœ„í•¨. loadingì´ë¼ëŠ” ë‹¨ì–´ê°€ í¬í•¨í•˜ê³  ìˆë˜ â€˜data fetch ì¤‘ì´ë‹¤â€™ë¼ëŠ” ë‰˜ì•™ìŠ¤ë¥¼ ì œê±°
        - ìƒˆë¡œìš´ derived boolean flagÂ `isLoading`Â ì¶”ê°€
        - ì˜ë¯¸: ë°ì´í„°ê°€ ì—†ìœ¼ë©°, ë°ì´í„° fetch í•¨ìˆ˜ë¥¼ ì‹¤í–‰ ì¤‘ì´ë‹¤.
        - =Â `isPending`Â &&Â `isFetching`
        - = v4.8ì˜Â `isInitialLoading`
- íŒ¨í‚¤ì§€ ì—…ê·¸ë ˆì´ë“œ ê³¼ì •ì—ì„œ dependencies, peerDependenciesì— ëŒ€í•œ ì´í•´ë„ ğŸ†™
    - ì¿¼ë¦¬ ë°ì´í„°ì˜ ë¡œì»¬ ì €ì¥ì„ ìœ„í•´ persistQueryClientë¥¼ ì‚¬ìš© ì¤‘. react-queryì™€ ì˜ì¡´ì„±ì´ ìˆì„ ê²ƒ ê°™ì•„ persistQueryClientì˜ ì˜ì¡´ì„±ì„ í•¨ê»˜ ì‚´í´ë´„.
    - â†’ í™•ì¸í•´ë³¸ ê²°ê³¼ `react-query-persist-client`ì˜ devDependencies, peerDependenciesì— `react-query`ê°€ ì¡´ì¬.
        
        ![image](https://github.com/eunddodi/daily-journal/assets/87167786/25efcbf2-fd21-4b90-b2eb-134c2d302390)
        
    - â†’ `^4.32.0`ì´ ì•„ë‹Œ `4.32.0`ìœ¼ë¡œ ëª…ì‹œë˜ì–´ ìˆì–´ì„œ, react-queryë§Œ ì—…ê·¸ë ˆì´ë“œ ì‹œ í˜¸í™˜ X
    - â†’ í•´ë‹¹ íŒ¨í‚¤ì§€ë„ í•¨ê»˜ ë²„ì „ ì—…